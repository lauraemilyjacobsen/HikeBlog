@model HikeBlog.Models.Post
@{
	ViewBag.Title = "Laura Jacobsen - " + Model.Title;
}
<h2 class="title">@Html.DisplayFor(model => model.Title)</h2>
<div class="blogContent">
	@Html.Raw(Model.Content)
</div>
<p class="galleryLabel">Photoset</p>
@{Html.RenderAction("Gallery", "Photo", new { photosetID = Model.FlickrPhotosetID });}
<br />
<br />
<div class="postDate" style="float:left;clear:both;">
	Posted on @Html.DisplayFor(model => model.DateCreated)
</div>
<a name="comments"></a>
<h3 class="commentHeader" style="clear: both;">
	Comments (@Model.Comments.Count)
</h3>
@foreach (var comment in Model.Comments.OrderByDescending(item => item.DateCreated))
{
	<div class="comment">
		<div class="commentName">
			@Html.DisplayFor(modelItem => comment.Name)
		</div>
		<div class="commentDateRight">
			@Html.DisplayFor(modelItem => comment.DateCreated)
		</div>
		<div class="commentText">
			@MvcHtmlString.Create(comment.Content.Replace(Environment.NewLine, "<br />"))
		</div>
		<div class="clearer"></div>
	</div>
}
<div>
	@{Html.RenderAction("Create", "Comment", new { postID = Model.ID });}
</div>
<script type="text/javascript" language="javascript">
	$(document).ready(function () {
		// make links open in new tabs
		$('.blogContent').each(function (index) {
			$(this).find('a').each(function () {
				$(this).attr("target", "_blank");
			});
		});

		// add double borders around images
//		$('.blogContent img').each(function (index) {
//			//$(this).wrap("<div class='imgWrapper' />");
//		});
	});
</script>
